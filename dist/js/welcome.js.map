{"version":3,"sources":["js/welcome.js"],"names":[],"mappings":"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","file":"js/welcome.js","sourcesContent":["const profileUrl = (token, provider) => `https://kvmveb8o06.execute-api.us-east-1.amazonaws.com/dev/authentication/profile/${token}?provider=${provider}`\n\nconst isUrl = (url) => {\n\tconst pattern = new RegExp('^(https?:\\\\/\\\\/)?'+ // protocol\n  '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.?)+[a-z]{2,}|'+ // domain name\n  '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))'+ // OR ip (v4) address\n  '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*'+ // port and path\n  '(\\\\?[;&a-z\\\\d%_.~+=-]*)?'+ // query string\n  '(\\\\#[-a-z\\\\d_]*)?$','i')\n\treturn !!url && pattern.test(url)\n}\n\nconst isArray = (array) => !!(array && Array === array.constructor)\n\nconst isFunction = (fn) => {\n\tconst getClass = {}\n\treturn !!fn && getClass.toString.call(fn) === '[object Function]';\n}\n\nconst addClass = (element, className) => {\n\tif (!element)\n\t\treturn\n\telse if (typeof element.classList === 'object') \n\t\telement.classList.add(className)\n\telse\n\t\telement.className += ' ' + className\n}\n\nconst removeClass = (element, className) => {\n\tif (!element)\n\t\treturn\n\telse if (element.classList)\n\t\telement.classList.remove(className)\n\telse\n\t\telement.className = element.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ')\n}\n\nconst getParameterByName = (name, url) => {\n\tif (!url) return;\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\n  var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n      results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\n\nconst getElementsById = (ids, document) => {\n\tif (!document || !ids) throw new Error('undefined arguments')\n\tif (!isFunction(document.getElementById)) throw new Error('document.getElementById is not a function')\n\tif (!isArray(ids)) throw new Error('ids is not an array')\n\treturn ids\n\t\t.map(id => ({[id]: document.getElementById(id)}))\n\t\t.reduce((acc, id) => Object.assign(acc, id), {})\n}\n\nconst getParameters = (list, href) => {\n\tif (!list || !href) throw new Error('undefined arguments')\n\tif (!isArray(list)) throw new Error('list is not an array')\n\treturn list\n\t\t.map(val => ({[val]: getParameterByName(val, href)}))\n\t\t.reduce((acc, obj) => Object.assign(acc, obj), {})\n}\n\nfunction LambdaError(response) {\n\tthis.name = 'LambdaError'\n\tthis.message = response.errorMessage\n\tthis.stack = response.stackTrace\n}\nLambdaError.prototype = Object.create(Error.prototype)\nLambdaError.prototype.constructor = LambdaError\n\nconst checkError = (response) => {\n\tif (!!response.errorMessage) \n\t\tthrow new LambdaError(response)\n\telse\n\t\treturn response\n}\n\nconst parseJSON = (response) => response.json()\n\nconst getProfile = ({token, provider}) => {\n\tif (!fetch) return\n\treturn fetch(profileUrl(token, provider))\n\t\t.then(parseJSON)\n\t\t.then(checkError)\n}\n\nconst getProfileSuccess = (json, el$) => {\n\tif (!json || !el$) return\n\tif (!!el$['authorizing'] && !!el$['welcome']) {\n\t\taddClass(el$['authorizing'], 'hidden')\n\t\tremoveClass(el$['welcome'], 'hidden')\n\t}\n\tif (!!el$['profilePicture'])\n\t\tel$['profilePicture'].src = json.picture || 'http://placehold.it/50x50'\n\tif (!!el$['profileName'])\t\n\t\tel$['profileName'].innerHTML  = json.name || json.email || ''\n}\n\nconst getProfileError = (err, el$) => {\n\tconsole.error(err)\n\tif (!!el$['errorMessage'] && !!el$['errorMessage']) {\n\t\taddClass(el$['authorizing'], 'hidden')\n\t\tremoveClass(el$['errorMessage'], 'hidden')\n\t}\n}\n\nconst main = (document, window) => {\n\ttry {\n\t\tconst ids = ['welcome', 'authorizing', 'icon', 'iconContainer', 'profilePicture', 'profileName', 'errorMessage']\n\t\tconst el$ = getElementsById(ids, document)\n\t\tconst parameters = ['provider', 'token']\n\t\tconst query = getParameters(parameters, window.location.href)\n\n\t\tremoveClass(el$['icon'], 'icon-wifi')\n\t\taddClass(el$['icon'], `icon-${query['provider']}`)\n\t\taddClass(el$['iconContainer'], query['provider'])\n\n\t\tgetProfile(query)\n\t\t\t.then(json => getProfileSuccess(json, el$))\n\t\t\t.catch(err => getProfileError(err, el$))\n\t} catch (err) {\n\t\tconsole.error(err)\n\t}\n}\n\nmain(document, window)\n"],"sourceRoot":"/source/"}