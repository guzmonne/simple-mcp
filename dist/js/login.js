"use strict";var signupUrl="https://kvmveb8o06.execute-api.us-east-1.amazonaws.com/dev/authentication/signup",toggleSections=function(e){var n=e.signupSection,s=e.signinSection,o=e.socialSection;n&&toggleClass(n,"hidden"),s&&toggleClass(s,"hidden"),o&&toggleClass(o,"hidden")},toggleSignupButtons=function(e){var n=e.spinButton,s=e.createButton;n&&toggleClass(n,"hidden"),s&&toggleClass(s,"hidden")},toggleForm=function(e){var n=e.name,s=e.email,o=e.password,i=e.age,t=e.maleRadio,a=e.femaleRadio;n&&(n.disabled=!n.disabled),s&&(s.disabled=!s.disabled),o&&(o.disabled=!o.disabled),i&&(i.disabled=!i.disabled),t&&(t.disabled=!t.disabled),a&&(a.disabled=!a.disabled),toggleSignupButtons(e)},hideAlerts=function(e){var n=e.mandatoryFieldsAlert,s=e.userExistsAlert;n&&!hasClass(n,"hidden")&&addClass(n,"hidden"),s&&!hasClass(s)&&addClass(s,"hidden")},showAlert=function(e){return removeClass(e,"hidden")},getUserDataFromForm=function(e){var n=e.name,s=e.email,o=e.password,i=e.age,t=e.maleRadio,a=e.femaleRadio;return Promise.resolve({name:n.value,email:s.value,password:o.value,age:JSON.parse(i.options[i.selectedIndex].value),gender:t.checked?"male":a.checked?"female":void 0})},validateData=function(e){var n=Object.keys(e).map(function(n){return isEmpty(e[n])}).reduce(function(e,n){return e||n},!1);return n?Promise.reject(new Error("Todos los campos son obligatorios.")):Promise.resolve(e)},signupUser=function(e){return fetchLambda(signupUrl,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})},createUser=function(e,n){n.preventDefault(),toggleForm(e),hideAlerts(e),getUserDataFromForm(e).then(function(e){return validateData(e)}).then(function(e){return signupUser(e)}).then(createUserSuccess.bind(void 0,e)).catch(createUserError.bind(void 0,e))},createUserSuccess=function(e,n){console.log(n),toggleForm(e),window.location.href=n},createUserError=function(e,n){console.error(n);var s=e.userExistsAlert,o=e.mandatoryFieldsAlert;toggleForm(e),"Todos los campos son obligatorios."===n.message&&showAlert(o),"email is in use"===n.message&&showAlert(s)},main=function(e,n){try{var s=["signupSection","signinSection","socialSection","signupForm","loginForm","showSigninSection","showSignupSection","name","email","password","maleRadio","femaleRadio","age","spinButton","createButton","mandatoryFieldsAlert","userExistsAlert"],o=getElementsById(s,e),i=toggleSections.bind(void 0,o),t=createUser.bind(void 0,o);addEventListener(o.showSigninSection,"click",i),addEventListener(o.showSignupSection,"click",i),addEventListener(o.signupForm,"onsubmit",t)}catch(e){console.error(e)}};main(document,window);
//# sourceMappingURL=login.js.map
