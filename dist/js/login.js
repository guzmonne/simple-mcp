"use strict";var signupUrl="https://kvmveb8o06.execute-api.us-east-1.amazonaws.com/dev/authentication/signup",toggleForms=function(e){var o=e.signupForm,s=e.loginForm,a=e.socialIcons;o&&toggleClass(o,"hidden"),s&&toggleClass(s,"hidden"),s&&toggleClass(a,"hidden")},toggleSignupButtons=function(e){var o=e.spinButton,s=e.createButton;o&&toggleClass(o,"hidden"),s&&toggleClass(s,"hidden")},toggleForm=function(e){var o=e.name,s=e.email,a=e.password,n=e.age,t=e.maleRadio,r=e.femaleRadio;o&&(o.disabled=!o.disabled),s&&(s.disabled=!s.disabled),a&&(a.disabled=!a.disabled),n&&(n.disabled=!n.disabled),t&&(t.disabled=!t.disabled),r&&(r.disabled=!r.disabled),toggleSignupButtons(e)},hideAlerts=function(e){var o=e.mandatoryFieldsAlert,s=e.userExistsAlert;o&&!hasClass(o,"hidden")&&addClass(o,"hidden"),s&&!hasClass(s)&&addClass(s,"hidden")},showAlert=function(e){return removeClass(e,"hidden")},getUserDataFromForm=function(e){var o=e.name,s=e.email,a=e.password,n=e.age,t=e.maleRadio,r=e.femaleRadio;return Promise.resolve({name:o.value,email:s.value,password:a.value,age:JSON.parse(n.options[n.selectedIndex].value),gender:t.checked?"male":r.checked?"female":void 0})},validateData=function(e){var o=Object.keys(e).map(function(o){return isEmpty(e[o])}).reduce(function(e,o){return e||o},!1);return o?Promise.reject(new Error("Todos los campos son obligatorios.")):Promise.resolve(e)},signupUser=function(e){return fetchLambda(signupUrl,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})},createUser=function(e,o){o.preventDefault(),toggleForm(e),hideAlerts(e),getUserDataFromForm(e).then(function(e){return validateData(e)}).then(function(e){return signupUser(e)}).then(createUserSuccess.bind(void 0,e)).catch(createUserError.bind(void 0,e))},createUserSuccess=function(e,o){console.log(o),toggleForm(e),window.location.href=o},createUserError=function(e,o){console.error(o);var s=e.userExistsAlert,a=e.mandatoryFieldsAlert;toggleForm(e),"Todos los campos son obligatorios."===o.message&&showAlert(a),"email is in use"===o.message&&showAlert(s)},main=function(e,o){try{var s=["signupForm","loginForm","socialIcons","signupForm","showLoginForm","showSignupForm","name","email","password","maleRadio","femaleRadio","age","spinButton","createButton","mandatoryFieldsAlert","userExistsAlert"],a=getElementsById(s,e),n=toggleForms.bind(void 0,a),t=createUser.bind(void 0,a);addEventListener(a.showLoginForm,"click",n),addEventListener(a.showSignupForm,"click",n),addEventListener(a.signupForm,"onsubmit",t)}catch(e){console.error(e)}};main(document,window);
//# sourceMappingURL=login.js.map
